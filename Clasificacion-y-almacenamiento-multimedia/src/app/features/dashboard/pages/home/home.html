<div class="dashboard-container">
  <!-- ===== SIDEBAR (Barra lateral de navegación) ===== -->
  <aside class="sidebar" [class.collapsed]="isCollapsed">
    
    <!-- Encabezado del sidebar con branding y botón de colapso -->
    <div class="sidebar-header">
      <span class="brand">Pinterest <strong>MEJORADO</strong></span>
      <button class="menu-toggle" (click)="toggleSidebar()" aria-label="Toggle sidebar">
        <i class="fas fa-bars"></i> <!-- Ícono de barra -->
      </button>
    </div>

    <!-- Información del usuario actualmente autenticado -->
    <div class="user-info" *ngIf="(currentUser$ | async) as user">
      <p>Hola, {{ user.nombre }}</p>
      <small class="user-role">({{ user.rol }})</small>
    </div>

    <!-- Enlaces de navegación dentro del dashboard -->
    <nav class="nav-links">
      <!-- Acceso a la gestión de archivos (visible para todos) -->
      <a
        routerLink="/dashboard/archivos"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
      >
        <i class="fas fa-folder-open"></i>
        Gestión de Archivos
      </a>

      <!-- Acceso a subir archivos (solo Admin o Periodista) -->
      <a
        routerLink="/dashboard/subir-archivo"
        routerLinkActive="active"
        *ngIf="isAdmin || isJournalist"
      >
        <i class="fas fa-upload"></i>
        Subir Archivo
      </a>

      <!-- Acceso a gestión de usuarios (solo Admin) -->
      <a
        routerLink="/dashboard/usuarios"
        routerLinkActive="active"
        *ngIf="isAdmin"
      >
        <i class="fas fa-users-cog"></i>
        Gestión de Usuarios
      </a>
    </nav>

    <!-- Botón para cerrar sesión -->
    <button class="logout-btn" (click)="logout()">
      <i class="fas fa-sign-out-alt"></i>
      Cerrar Sesión
    </button>
  </aside>

  <!-- ===== BOTÓN FLOTANTE PARA MOSTRAR/OCULTAR SIDEBAR EN MÓVILES ===== -->
  <button
    class="floating-toggle-btn"
    *ngIf="showToggleButton"
    (click)="toggleSidebar()"
    aria-label="Mostrar u ocultar menú"
  >
    <i class="fas fa-bars"></i>
  </button>

  <!-- ===== CONTENIDO PRINCIPAL ===== -->
  <main class="content">
    <!-- Renderiza los componentes hijos según la ruta activa -->
    <router-outlet></router-outlet>
  </main>
</div>
